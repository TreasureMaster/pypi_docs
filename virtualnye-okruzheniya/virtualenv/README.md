# virtualenv

## virtualenv

**virtualenv** - это инструмент для создания изолированных сред Python. Начиная с Python 3.3, его подмножество было интегрировано в стандартную библиотеку в [модуле venv](https://docs.python.org/3/library/venv.html). Модуль **venv** не предлагает всех функций этой библиотеки, и это лишь некоторые из наиболее важных:

* работает медленнее (из-за отсутствия метода начального значения данных приложения),
* не такой расширяемый,
* не может создавать виртуальные среды для произвольно установленных версий Python (и автоматически обнаруживать их),
* невозможно обновить через [pip](https://pip.pypa.io/en/stable/installing/),
* не имеет столь богатого программного API (описывать виртуальные среды, не создавая их).

Основная проблема, которую решают, - это зависимости и версии, а также косвенные разрешения. Представьте, что у вас есть приложение, которому требуется версия `1` **LibFoo**, а другому приложению требуется версия `2`. Как вы можете использовать обе эти библиотеки? Если вы установите все на свой хост Python (например, `python3.8`), легко попасть в ситуацию, когда два пакета имеют конфликтующие требования.

Или, в более общем плане, что, если вы хотите установить приложение и оставить его в покое? Если приложение работает, любое изменение в его библиотеках или версиях этих библиотек может нарушить работу приложения. Кроме того, что, если вы не можете установить пакеты в глобальный каталог **site-packages** из-за отсутствия разрешений на изменение среды хоста python?

Во всех этих случаях вам может помочь **virtualenv**. Он создает среду, в которой есть собственные каталоги установки, которые не разделяют библиотеки с другими средами **virtualenv** (и, возможно, также не имеют доступа к глобально установленным библиотекам).

## Полезные ссылки

### Связанные проекты, которые создают абстракции поверх **virtualenv**

* [virtualenvwrapper](https://pypi.org/project/virtualenvwrapper/) - полезный набор скриптов для создания и удаления виртуальных сред
* [pew](https://pypi.org/project/pew/) - предоставляет набор команд для управления несколькими виртуальными средами
* [tox](https://pypi.org/project/tox/) - универсальный инструмент командной строки для управления **virtualenv** и автоматизации тестирования, управляемый файлом конфигурации `tox.ini`
* [nox](https://pypi.org/project/nox/) - инструмент, который автоматизирует тестирование в нескольких средах Python, аналогично **tox**, управляемый файлом конфигурации `noxfile.py`

### Учебники

* [Учебник Кори Шафер](https://www.youtube.com/watch?v=N5vscPTWKOk) о том, как использовать **virtualenv**
* [Использование **virtualenv** с **mod\_wsgi**](https://code.google.com/archive/p/modwsgi/wikis/VirtualEnvironments.wiki)****

### Представление, как пакет работает изнутри

* [Бернат Габор: статус-кво виртуальных сред](https://www.youtube.com/watch?v=o1Vue9CWRxU)
* [Карл Мейер: обратная инженерия мозга Яна Бикинга: внутри pip и virtualenv](https://pyvideo.org/chipy/reverse-engineering-ian-bicking--39-s-brain--insi.html)
