# Режим разработки setuptools

## "Режим разработки"

В нормальных условиях **distutils** предполагает, что вы собираетесь собрать дистрибутив своего проекта, а не использовать его в «raw» или «unbuilt» форме. Однако, если бы вы использовали **distutils** для сборки дистрибутива, вам пришлось бы перестраивать и переустанавливать проект каждый раз, когда вы вносили в него изменения во время разработки.

Другая проблема, которая иногда возникает в связи с **distutils**, заключается в том, что вам может потребоваться разработка двух связанных проектов одновременно. Вам может потребоваться поместить пакеты обоих проектов в один и тот же каталог для их запуска, но нужно держать их отдельно для целей контроля версий. Как это сделать?

**Setuptools** позволяет развертывать проекты для использования в общем каталоге или промежуточной области, но без копирования каких-либо файлов. Таким образом, вы можете редактировать код каждого проекта в его контрольном каталоге, и вам нужно только запускать команды сборки, когда вы меняете C расширения проекта или аналогично скомпилированные файлы. Вы даже можете развернуть проект в контрольном каталоге другого проекта, если это ваш предпочтительный способ работы (в отличие от использования общей независимой промежуточной области или каталога пакетов сайтов).

Для этого используйте команду `setup.py develop`. Он работает очень похоже на `setup.py install`, за исключением того, что на самом деле ничего не устанавливает. Вместо этого он создает специальный файл с расширением `.egg-link` в каталоге развертывания, который ссылается на исходный код вашего проекта. И если ваш каталог развертывания - это каталог `site-packages` Python, он также обновит файл `easy-install.pth`, включив исходный код вашего проекта, тем самым сделав его доступным в `sys.path` для всех программ, использующих эту установку Python.

Если вы включили флаг `use_2to3`, то, конечно, `.egg-link` не будет напрямую связываться с вашим исходным кодом при запуске под Python 3, поскольку этот исходный код будет создан для Python 2 и не будет работать под Python 3. Вместо этого `setup.py develop` соберет код Python 3 в каталоге `build` и сделает ссылку там. Это означает, что после внесения изменений в код вам нужно будет запустить `setup.py build`, прежде чем эти изменения будут приняты вашей установкой Python 3.

Кроме того, команда `develop` создает сценарии оболочки в целевом каталоге сценариев, которые будут запускать ваши сценарии в разработке после того, как все ваши пакеты **install\_requires** доступны в `sys.path`.

Вы можете развернуть один и тот же проект в нескольких промежуточных областях, например Если у вас есть несколько проектов на одном компьютере, которые используют один и тот же проект, вы занимаетесь разработкой.

Когда вы закончите с заданной задачей разработки, вы можете удалить исходный код проекта из промежуточной области с помощью `setup.py develop --uninstall`, указав желаемую промежуточную область, если она не задана по умолчанию.

Есть несколько опций для управления точным поведением команды develop; см. [раздел о команде develop](spravka-po-komandam-setuptools.md#develop-razvorachivaet-iskhodnyi-kod-proekta-v-rezhime-razrabotki) ниже для получения более подробной информации.

Обратите внимание, что вы также можете применять команды **setuptools** к проектам, отличным от **setuptools**, используя такие команды:

```bash
python -c "import setuptools; with open('setup.py') as f: exec(compile(f.read(), 'setup.py', 'exec'))" develop
```

То есть вы можете просто перечислить стандартные команды и параметры настройки после цитируемой части.
