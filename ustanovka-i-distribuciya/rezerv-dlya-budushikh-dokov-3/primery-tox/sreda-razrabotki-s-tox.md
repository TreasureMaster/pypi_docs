# Среда разработки с tox

**tox** можно использовать просто для подготовки различных виртуальных сред, необходимых для проекта.

Эта функция может использоваться средствами развертывания при подготовке развернутых сред проекта. Его также можно использовать для настройки нормализованных сред разработки проектов и, таким образом, помочь снизить риск использования несовпадающими средами разработки разными членами команды.

## Создание сред разработки с использованием параметра --devenv

Самый простой способ настроить среду разработки - использовать параметр `--devenv` вместе с существующими настроенными файлами **testenv**. Параметр `--devenv` принимает единственный аргумент - место, в котором вы хотите создать среду разработки.

Например, если я хотел воспроизвести среду **py36**, я мог бы запустить:

```bash
$ tox --devenv venv-py36 -e py36
...
$ source venv-py36/bin/activate
(venv-py36) $ python --version
Python 3.6.7
```

Параметр `--devenv` пропускает раздел `commands=` этой настроенной тестовой среды и всегда устанавливает `usedevelop = true` для создаваемой среды.

Если вы не укажете среду с параметром `-e`, функция **devenv** по умолчанию будет использовать параметр `-e py` - обычно используется интерпретатор, с которым вы запускаете **tox**, и конфигурацию по умолчанию `[testenv]`.

Можно использовать параметр `--devenv` без файла конфигурации **tox**, однако файл конфигурации будет соблюдаться, если он присутствует.

## Создание сред разработки с использованием конфигурации

Вот несколько примеров, иллюстрирующих, как настроить среду разработки проекта с помощью **tox**. Для наглядности назовем среду разработки **dev**.

## Пример 1: Базовый сценарий

### Шаг 1. Настройте среду разработки

Сначала мы подготавливаем конфигурацию **tox** для нашей среды разработки, определяя раздел `[testenv: dev]` в файле конфигурации `tox.ini` проекта:

```bash
[testenv:dev]
basepython = python2.7
usedevelop = True
```

В нем мы заявляем:

* какой исполняемый файл Python использовать в среде,
* что наш проект должен быть установлен в среду с помощью `setup.py develop`, а не сборка и установка исходного дистрибутива с помощью `setup.py install`.

Среда разработки будет находиться в **toxworkdir** (по умолчанию `.tox`), как и другие среды **tox**.

Мы можем настроить намного больше, если захотим. Например, мы можем добавить в нашу конфигурацию следующее, указав **tox** не использовать повторно команды или настройки **deps** из базовой конфигурации `[testenv]`:

```bash
[testenv:dev]
commands =
deps =
```

### Шаг 2 - Создайте среду разработки

После того, как раздел конфигурации `[testenv: dev]` определен, мы создаем реальную среду разработки, выполнив следующие действия:

```bash
tox -e dev
```

Это создает среду по пути, указанному значением конфигурации среды **envdir**.

## Пример 2: более сложный сценарий

Допустим, мы хотим, чтобы наша среда разработки проекта:

* использовала исполняемый файл Python `python2.7`,
* извлекала пакеты из файла `requirements.txt`, расположенного в том же каталоге, что и `tox.ini`.

Вот пример конфигурации для описанного сценария:

```bash
[testenv:dev]
basepython = python2.7
usedevelop = True
deps = -rrequirements.txt
```
