# Быстрый старт

## Быстрый старт

Вот как создать новый проект, который мы назовем **TowelStuff**.

### 1. Разместите свой проект

Самый маленький проект Python - это два файла. Файл `setup.py`, который описывает метаданные о вашем проекте, и файл, содержащий код Python для реализации функциональности вашего проекта.

В этом примере проекта мы собираемся добавить немного больше, чтобы обеспечить типичный минимальный макет проекта. Мы создадим полный пакет Python, каталог с файлом `__init__.py`, который называется [towelstuff/](sozdanie-paketa.md#sozdanie-vashego-distributivnogo-faila). Это предполагает рост в будущем, поскольку исходный код нашего проекта, вероятно, вырастет за пределы одного файла модуля.

Мы также создадим файл [README.txt](sozdanie-paketa.md#organizaciya-struktury-failov-i-katalogov), описывающий обзор вашего проекта, и файл [LICENSE.txt](sozdanie-paketa.md#organizaciya-struktury-failov-i-katalogov), содержащий лицензию вашего проекта.

Для начала достаточно. Существует ряд других типов файлов, которые часто используются в проекте. См. раздел «[Организация файлов и структуры каталогов](sozdanie-paketa.md#organizaciya-struktury-failov-i-katalogov)», где приведен пример более детально проработанного проекта.

Теперь ваш проект будет выглядеть так:

```bash
TowelStuff/
    LICENSE.txt
    README.txt
    setup.py
    towelstuff/
        __init__.py
```

### 2. Опишите свой проект

Файл [setup.py](sozdanie-paketa.md#organizaciya-struktury-failov-i-katalogov) лежит в основе проекта Python. Он описывает все метаданные о вашем проекте. Существует довольно много полей, которые вы можете добавить в проект, чтобы предоставить ему богатый набор метаданных, описывающих проект. Однако есть только три обязательных поля: имя, версия и пакеты. Поле имени должно быть уникальным, если вы хотите опубликовать свой пакет в индексе пакетов Python (PyPI). Поле версии отслеживает разные выпуски проекта. Поле пакетов описывает, где вы разместили исходный код Python в своем проекте.

Наш первоначальный файл `setup.py` также будет включать информацию о лицензии и повторно использовать файл `README.txt` для поля _**long\_description**_. Это будет выглядеть так:

```python
from distutils.core import setup

setup(
    name='TowelStuff',
    version='0.1dev',
    packages=['towelstuff',],
    license='Creative Commons Attribution-Noncommercial-Share Alike license',
    long_description=open('README.txt').read(),
)
```

### 3. Создайте свой первый релиз

В поле _**version**_ мы указали `0.1dev`. Это указывает на то, что мы **разрабатываем** версию `0.1`. Прямо сейчас в проекте нет кода. После того, как вы напишете достаточно кода, чтобы сделать первый выпуск стоящим, вы измените поле версии на `0.1`, опустив маркер _**dev**_.

Чтобы создать релиз, ваш исходный код должен быть упакован в один архивный файл. Это можно сделать с помощью команды **sdist**:

```bash
$ python setup.py sdist
```

Это создаст подкаталог `dist/` в вашем проекте, и все файлы исходного кода вашего проекта будут заключены в файл распространения, сжатый архивный файл в форме:

```bash
TowelStuff-0.1.tar.gz
```

Формат сжатого архива по умолчанию - файлы `.tar.gz` в системах **POSIX** и файлы `.zip` в системах **Windows**.

По умолчанию `distutils` **не включает** все файлы в каталог вашего проекта. По умолчанию будут включены только следующие файлы:

* все исходные файлы Python, подразумеваемые параметрами _**py\_modules**_ и _**packages**_
* все исходные файлы C, упомянутые в параметрах _**ext\_modules**_ или _**libraries**_
* скрипты, определенные опцией _**scripts**_
* все, что выглядит как тестовый сценарий: `test/test *.py`
* файлы верхнего уровня с именами: `README.txt`, `README`, `setup.py` или `setup.cfg`

Если вы хотите включить дополнительные файлы, есть несколько вариантов включения этих файлов:

* Используйте пакет, расширяющий **distutils** с большей функциональностью. **setuptools** и **distribute** позволяют включать все файлы, проверенные в вашу систему контроля версий.
* Напишите файл `MANIFEST.in` верхнего уровня. Это файл шаблона, который определяет, какие файлы (и шаблоны файлов) должны быть включены. (TODO: ссылка на документ MANIFEST.in)

Когда вы запускаете команду **sdist**, будет создан файл с именем **MANIFEST** (_мои примечания:_ вероятно, что теперь - `SOURCE.txt`), который содержит полный список всех включенных файлов. Вы можете просмотреть этот файл, чтобы дважды проверить, правильно ли вы настроили свой проект и включили все файлы. Теперь ваш проект готов к выпуску. Перед выпуском рекомендуется дважды проверить, что у вас есть:

* Правильный номер версии. Хотя во время разработки удобно добавлять маркер _**dev**_ к номеру версии, чтобы можно было различать код в стадии разработки и выпущенную версию, вы никогда не захотите публиковать выпуск с именем _**dev**_ в названии версии.
* Включены все необходимые файлы проекта.

Просмотрите файл **MANIFEST** или откройте файл архива, созданный с помощью команды **sdist**.

### 4. Зарегистрируйте свой пакет в Python Package Index (PyPI)

Файл распространения, созданный при запуске **sdist**, можно опубликовать где угодно. На веб-сайте python.org есть центральный индекс всех общедоступных проектов Python, который называется [The Python Package Index (PyPI)](publikaciya-paketa.md#the-python-package-index-pypi). Здесь вы захотите выпустить свой дистрибутив, если собираетесь сделать свой проект общедоступным.

Сначала вам нужно будет посетить этот сайт, где вы можете зарегистрировать учетную запись. Проекты публикуются на PyPI в формате:

```bash
http://pypi.python.org/pypi/<projectname>
```

Вашему проекту нужно будет выбрать имя, которое еще не используется в PyPI. Затем вы можете запросить имя своего нового проекта, зарегистрировав пакет, выполнив команду:

```bash
$ python setup.py register
```

### 5. Загрузите свой релиз, затем возьмите полотенце и спасите Вселенную!

Теперь, когда вы счастливы, что можете создать действительный исходный код, пора загрузить готовый продукт в PyPI командой **upload**. Мы также создадим дистрибутивный файл **bdist\_wininst** нашего проекта, который создаст установочный файл Windows. Есть несколько различных форматов файлов, для которых могут быть созданы дистрибутивы Python. Каждый формат должен быть указан при запуске команды загрузки, иначе они не будут загружены (даже если вы уже создали их ранее). Вы всегда должны загружать исходный файл дистрибутива. Другие форматы не являются обязательными и будут зависеть от потребностей вашей предполагаемой базы пользователей:

```bash
$ python setup.py sdist bdist_wininst upload
```

На этом этапе вы должны объявить о своем пакете сообществу!

Наконец, в файле `setup.py` вы можете спланировать следующий выпуск, изменив поле версии, чтобы указать, над какой версией вы хотите работать дальше (например, `0.2dev`).

Это [краткое руководство](bystryi-start.md) - хорошее краткое введение, но оно не охватывает многих неясных вариантов использования. Дополнительные сведения см. в разделе «[Введение в упаковку](vvedenie-v-upakovku.md)», чтобы лучше понять [текущее состояние упаковки](vvedenie-v-upakovku.md#tekushee-sostoyanie-upakovki).
