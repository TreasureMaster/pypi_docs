# HTML/XHTML FAQ

Документация **Flask** и примеры приложений используют **HTML5**. Вы можете заметить, что во многих ситуациях, когда закрывающие теги являются необязательными, они не используются, поэтому **HTML** чище и быстрее загружается. Поскольку среди разработчиков существует большая путаница в отношении **HTML** и **XHTML**, этот документ пытается ответить на некоторые из основных вопросов.

## История XHTML

Некоторое время казалось, что **HTML** вот-вот будет заменен **XHTML**. Однако практически любые веб-сайты в Интернете представляют собой настоящий XHTML (который обрабатывается HTML с использованием правил XML). Есть несколько основных причин, почему это так. Одна из них - отсутствие надлежащей поддержки XHTML в Internet Explorer. В спецификации XHTML указано, что XHTML должен обслуживаться с типом MIME `application/xhtml + xml`, но Internet Explorer отказывается читать файлы с этим типом MIME. Хотя настроить веб-серверы для правильного обслуживания XHTML относительно легко, немногие люди это делают. Вероятно, это связано с тем, что правильное использование XHTML может быть довольно болезненным.

Одна из самых важных причин боли - драконовская (строгая и безжалостная) обработка ошибок XML. Когда обнаруживается ошибка синтаксического анализа XML, браузер должен показать пользователю уродливое сообщение об ошибке, вместо того, чтобы пытаться исправить ошибку и отобразить все, что он может. Большая часть генерации (X)HTML в Интернете основана на механизмах шаблонов, отличных от XML (таких как **Jinja**, используемый во **Flask**), которые не защищают вас от случайного создания недопустимого XHTML. Существуют механизмы шаблонов на основе XML, такие как **Kid** и популярный **Genshi**, но они часто связаны с большими накладными расходами во время выполнения и их не так просто использовать, поскольку они должны подчиняться правилам XML.

Однако большинство пользователей полагали, что они правильно используют XHTML. Они написали документ XHTML в верхней части документа и самостоятельно закрыли все необходимые теги ( `<br>` становится `</br>` или `<br></br>` в XHTML). Однако, даже если документ правильно проверяется как XHTML, то, что действительно определяет обработку XHTML / HTML в браузерах, - это тип **MIME**, который, как было сказано ранее, часто не устанавливается должным образом. Итак, действительный XHTML обрабатывался как недопустимый HTML.

XHTML также изменил способ использования **JavaScript**. Чтобы правильно работать с XHTML, программисты должны использовать интерфейс **DOM** с пространством имен с пространством имен XHTML для запроса элементов HTML.

## История HTML5

Разработка спецификации **HTML5** была начата в 2004 году под названием «Веб-приложения 1.0» рабочей группой по технологиям веб-гипертекстовых приложений или **WHATWG** (которая была сформирована основными поставщиками браузеров **Apple**, **Mozilla** и **Opera**) с целью написания новая и улучшенная спецификация HTML, основанная на существующем поведении браузера вместо нереалистичных и обратно несовместимых спецификаций.

Например, в HTML4 `<title/Hello/` теоретически анализирует точно так же, как `<title>Hello</title>`. Однако, поскольку люди использовали XHTML-подобные теги в соответствии со строками `<link />`, поставщики браузеров реализовали синтаксис XHTML поверх синтаксиса, определенного в спецификации.

В 2007 году эта спецификация была принята в качестве основы новой спецификации HTML под эгидой **W3C**, известной как HTML5. В настоящее время кажется, что XHTML теряет популярность, поскольку рабочая группа XHTML 2 распущена, а HTML5 внедряется всеми основными поставщиками браузеров.

## HTML в сравнении с XHTML

В следующей таблице представлен краткий обзор функций, доступных в HTML 4.01, XHTML 1.1 и HTML5. (XHTML 1.0 не включен, так как он был заменен XHTML 1.1 и почти не используемым XHTML5.)

| Функции                                              | HTML4.01   | XHTML1.1 | HTML5      |
| ---------------------------------------------------- | ---------- | -------- | ---------- |
| `<tag/value/` == `<tag>value</tag>`                  | **V** \[1] | X        | X          |
| поддерживается `<br/>`                               | X          | **V**    | **V** \[2] |
| поддерживается `<script/>`                           | X          | **V**    | X          |
| должен быть сохранен как _**text/html**_             | **V**      | X \[3]   | **V**      |
| должен быть сохранен как _**application/xhtml+xml**_ | X          | **V**    | X          |
| строгая обработка ошибок                             | X          | **V**    | X          |
| встроенный SVG                                       | X          | **V**    | **V**      |
| встроенный MathML                                    | X          | **V**    | **V**      |
| тег `<video>`                                        | X          | X        | **V**      |
| тег `<audio>`                                        | X          | X        | **V**      |
| Новые семантические теги вроде `<article>`           | X          | X        | **V**      |

1. Это малоизвестная функция, унаследованная от **SGML**. Обычно он не поддерживается браузерами по причинам, описанным выше.
2. Это сделано для совместимости с серверным кодом, который генерирует XHTML для таких тегов, как `<br>`. Его не следует использовать в новом коде.
3. XHTML 1.0 - это последний стандарт XHTML, который позволяет использовать формат `text/html` по причинам обратной совместимости.

## Что означает "strict"?

HTML5 имеет строго определенные правила синтаксического анализа, но он также точно определяет, как браузер должен реагировать на ошибки синтаксического анализа - в отличие от XHTML, в котором просто указано, что синтаксический анализ должен быть прерван. Некоторых смущает явно недопустимый синтаксис, который по-прежнему дает ожидаемые результаты (например, отсутствующие конечные теги или значения атрибутов без кавычек).

Некоторые из них работают из-за мягкой обработки ошибок, которую большинство браузеров используют при обнаружении ошибки разметки, другие фактически указаны. Следующие конструкции являются необязательными в HTML5 по стандарту, но должны поддерживаться браузерами:

* Оборачивание документа в тег `<html>`
* Перенос элементов заголовка в `<head>` или элементов тела в `<body>`
* Закрытие тегов `<p>`, `<li>`, `<dt>`, `<dd>`, `<tr>`, `<td>`, `<th>`, `<tbody>`, `<thead>` или `<tfoot>`.
* Заключение в кавычки атрибутов, если они не содержат пробелов или специальных символов (например, `<`, `>`, `'` или `"`).
* Требовать, чтобы логические атрибуты имели значение.

Это означает, что следующая страница в HTML5 вполне корректна:

```markup
<!doctype html>
<title>Hello HTML5</title>
<div class=header>
  <h1>Hello HTML5</h1>
  <p class=tagline>HTML5 is awesome
</div>
<ul class=nav>
  <li><a href=/index>Index</a>
  <li><a href=/downloads>Downloads</a>
  <li><a href=/about>About</a>
</ul>
<div class=body>
  <h2>HTML5 is probably the future</h2>
  <p>
    There might be some other things around but in terms of
    browser vendor support, HTML5 is hard to beat.
  <dl>
    <dt>Key 1
    <dd>Value 1
    <dt>Key 2
    <dd>Value 2
  </dl>
</div>
```

## Новые технологии в HTML5

HTML5 добавляет много новых функций, которые упрощают написание и использование веб-приложений.

* Теги `<audio>` и `<video>` позволяют встраивать аудио и видео без сложных надстроек, таких как **QuickTime** или **Flash**.
* Семантические элементы, такие как `<article>`, `<header>`, `<nav>` и `<time>`, упрощающие понимание контента.
* Тег `<canvas>`, который поддерживает мощный API рисования, снижает потребность в изображениях, созданных сервером, для графического представления данных.
* Новые типы элементов управления формы, такие как `<input type = "date">`, которые позволяют пользовательским агентам упростить ввод и проверку значений.
* Расширенные API-интерфейсы **JavaScript**, такие как **WEB Storage**, **Web Workers**, **Web Sockets**, геолокация и автономные приложения.

Также были добавлены многие другие функции. Хорошим руководством по новым функциям HTML5 является книга Марка Пилигрима «Dive Into HTML5», которая скоро будет опубликована. Однако не все из них пока поддерживаются браузерами, поэтому будьте осторожны.

## Что следует использовать?

В настоящее время ответ - HTML5. Учитывая последние разработки веб-браузеров, существует очень мало причин использовать XHTML. Подводя итог приведенным выше причинам:

* **Internet Explorer** (который, к сожалению, в настоящее время занимает лидирующую позицию на рынке) плохо поддерживает XHTML.
* Многие библиотеки **JavaScript** также не поддерживают XHTML из-за того, что он требует более сложного API пространств имен.
* HTML5 добавляет несколько новых функций, включая семантические теги и долгожданные теги `<audio>` и `<video>`.
* За ним стоит поддержка большинства производителей браузеров.
* Писать намного проще и компактнее.

Для большинства приложений, несомненно, лучше использовать HTML5, чем XHTML.
