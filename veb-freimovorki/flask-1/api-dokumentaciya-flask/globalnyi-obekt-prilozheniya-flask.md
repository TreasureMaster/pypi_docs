# Глобальный объект приложения Flask

Для обмена данными, которые действительны для одного запроса только от одной функции к другой, глобальной переменной недостаточно, потому что она может сломаться в многопоточных средах. **Flask** предоставляет вам специальный объект, который гарантирует, что он действителен только для активного запроса, и который будет возвращать разные значения для каждого запроса. Вкратце: он делает правильные вещи, как и для [request](dannye-vkhodyashego-zaprosa-request.md#flask-request) и [session](sessii-flask.md#klass-flask-session).

## flask.g

Объект пространства имен, который может хранить данные в контексте приложения. Это экземпляр [Flask.app\_ctx\_globals\_class](obekt-prilozheniya-flask.md#app\_ctx\_globals\_class), для которого по умолчанию используется [ctx.\_AppCtxGlobals](globalnyi-obekt-prilozheniya-flask.md#klass-flask-ctx-\_appctxglobals).

Это хорошее место для хранения ресурсов во время запроса. Во время тестирования вы можете использовать шаблон «[Подделка ресурсов и контекста](../rukovodstvo-polzovatelya-flask/testirovanie-prilozhenii-flask.md#poddelnye-resursy-i-kontekst)» для предварительной настройки таких ресурсов.

Это прокси. См. [примечания о прокси](../rukovodstvo-polzovatelya-flask/kontekst-zaprosa-flask.md#primechaniya-k-proksi) для получения дополнительной информации.

_Изменено в версии 0.10:_ привязка к контексту приложения, а не к контексту запроса.

## Класс flask.ctx.\_AppCtxGlobals

Обычный объект. Используется как пространство имен для хранения данных в контексте приложения.

Создание контекста приложения автоматически создает этот объект, который становится доступным в качестве прокси-сервера **g**.

### &#x20;'key' in g

_Новое в версии 0.10_.

Проверяет наличие атрибута.

### &#x20;iter(g)

_Новое в версии 0.10_.

Возвращает итератор по именам атрибутов.

### &#x20;get(_name_, _default=None_)

_Новое в версии 0.10_.

Получает атрибут по имени или значению по умолчанию. Как [dict.get ()](https://docs.python.org/3/library/stdtypes.html#dict.get).

**Параметры:**

* **name** - Имя получаемого атрибута.
* **default** - Возвращаемое значение, если атрибут отсутствует.

### &#x20;pop(_name_, _default=\<object object>_)

_Новое в версии 0.11_.

Получает и удаляет атрибут по имени. Как [dict.pop ()](https://docs.python.org/3/library/stdtypes.html#dict.pop).

**Параметры:**

* **name** - Имя возвращаемого атрибута.
* **default** - Возвращаемое значение, если атрибут отсутствует, вместо этого вызывает **KeyError**.

### &#x20;setdefault(_name_, _default=None_)

_Новое в версии 0.11_.

Получает значение атрибута, если он присутствует, в противном случае устанавливает и возвращает значение по умолчанию. Как [dict.setdefault ()](https://docs.python.org/3/library/stdtypes.html#dict.setdefault).

**Параметры:**

* **name** - Имя получаемого атрибута.
* **default** - Значение, которое нужно установить и вернуть, если атрибут отсутствует.
