# FAQ по Flask-Bootstrap

### Почему у меня в выходных данных шаблона появляются нежелательные автоматические экранирования?

Убедитесь, что ваши шаблоны заканчиваются на `.htm`, `.html`, `.xml` или `.xhtml`. **Flask** устанавливает режим `Jinja2-autoescape` в зависимости от расширения файла шаблона (дополнительную информацию см. [в этом вопросе StackOverflow](https://stackoverflow.com/questions/13222925/how-do-i-enable-autoescaping-in-templates-with-a-jhtml-extension-in-flask)).

Обычно в приложениях **Flask** принято называть ваши HTML-шаблоны `.html`.

### Как я могу добавить в шаблон собственный javascript?

Используйте [super](https://jinja.palletsprojects.com/en/2.11.x/templates/#super-blocks) в **Jinja2** вместе с блоком скриптов `scripts`. Функция **super** добавляет содержимое блока из родительского шаблона, таким образом вы даже можете решить, хотите ли вы включить его до или после jQuery/Bootstrap. Пример:

```python
{% raw %}
{% block scripts %}
  {{super()}}
  <script src="my_app_code.js">
{% endblock %}
{% endraw %}
```

### Почему не загружается Bootstrap javascript?

Причуду, которую легко упустить, - это имена блоков: хотя есть блок с именем `body`, обычно это не тот, который вы хотите заменить, вместо этого используйте `content`. В настоящее время по умолчанию javascript [загружается в конец](https://stackoverflow.com/questions/436411/where-should-i-put-script-tags-in-html-markup) тега `<body>`).

[Доступные блоки](osnovy-ispolzovaniya.md#dostupnye-bloki) имеют более подробную информацию.

### Как добавить в header нестандартные элементы?

Часто возникает вопрос, как добавить пользовательские атрибуты в элемент `<head>`, например, теги `<link>` или иконки `favicons`. Этого также легко добиться с помощью функции [super](https://jinja.palletsprojects.com/en/2.11.x/templates/#super-blocks):

```python
{% raw %}
{% block head %}
{{super()}}
<link rel="icon" type="image/png" href="http://example.com/myicon.png">
{% endblock %}
{% endraw %}
```

Это добавит желаемое содержимое прямо над закрывающим тегом `</head>`. Другой способ для больших проектов - создать новый базовый шаблон и самостоятельно добавить необходимые блоки:

```python
{% raw %}
{% block head %}
{{super()}}
{% block favicon %}<!-- default favicon could go here -->{% endblock %}
{% block feeds %}{% endblock %}
{% endblock %}
{% endraw %}
```

Затем дочерний шаблон этого базового шаблона может использовать эти блоки для указания настраиваемого фида или значка.

### Как добавить нижний колонтитул (footer)?

Функцию `super ()` также можно использовать для расширения любого уже определенного блока. Обычно рекомендуется создать другой производный базовый шаблон для определенных макетов. Пример `with-footer.html`:

```python
{% raw %}
{% extends "bootstrap/base.html" %}

{%- block content %}
{{super()}}
{%- block footer %}
<footer>&copy; 2016 Awesome, Inc.</footer>
{%- endblock footer %}
{%- endblock content %}
{% endraw %}
```

Блок нижнего колонтитула `footer` можно переопределить во всех шаблонах, которые расширяются от `with-footer.html`.

### Как мне обслуживать статические файлы при развертывании?

**Flask-Bootstrap** не является чем-то особенным в том смысле, что он просто добавляет схему под названием `bootstrap`. Статические файлы сопоставляются с определенным префиксом URL (по умолчанию `static/bootstrap`) и обслуживаются из определенного каталога, найденного в вашей установке **virtualenv** (например, `lib/python2.7/site-packages/flask_bootstrap/static`), поэтому традиционная настройка настроит ваш веб-сервер для обслуживания этого адреса из указанного каталога.

Более элегантный подход заключается в наличии кеша перед сервером WSGI, который учитывает заголовки `Cache-Control`. По умолчанию **Flask** будет обслуживать статические файлы со сроком действия 12 часов (вы можете изменить это значение с помощью **SEND\_FILE\_MAX\_AGE\_DEFAULT**), чего должно быть достаточно.

Для этого подхода должно быть достаточно [nginx](http://nginx.org/) (или, если хотите, [Varnish](http://varnish-cache.org/)) или их эквивалентов на основе облачных сервисов. **Flask-Bootstrap** 2.3.2.2 поддерживает это, предлагая изменение строки запроса (см. **BOOTSTRAP\_QUERYSTRING\_REVVING**), чтобы обеспечить обслуживание более новых версий **Bootstrap** при обновлении **Flask-Bootstrap**.

### Как использовать Bootstrap 2/3?

Текущая основная стабильная версия **Bootstrap** - 3, которая, к сожалению, обратно несовместима с **Bootstrap 2**. **Flask-Bootstrap** поддерживается для последней версии **Bootstrap 2** (хотя вы не должны ожидать новых функций, только исправления ошибок) и, конечно же, **Bootstrap 3**.

Устанавливая **Flask-Bootstrap**, вы всегда будете получать последнюю версию - **Bootstrap 3**. Чтобы установить (или сохранить) **Flask-Bootstrap 2**, вам нужно будет указать версию в файле `setup.py` или `requirements.txt` следующим образом:

```python
# other stuff in setup.py
# ...
install_requires=['flask-bootstrap<3', 'another_package']
# ...
```

Неплохая идея - привязать к конкретному **Flask-Bootstrap** (например, `'flask- bootstrap == 2.3.2.2'`, чтобы избежать сюрпризов в процессе производства).

Подробности см. в документации по [использованию Bootstrap 2](ispolzovanie-bootstrap-2.md).

### Где FontAwesome?

Версии **Flask-Bootstrap** с использованием **Bootstrap 2** включали [FontAwesome](https://fontawesome.com/?from=io), это больше не относится к **Flask-Bootstrap 3** и выше.

Первоначально **Bootstrap** поставлялся только с иконками на основе изображений, которые плохо масштабировались, **FontAwesome** исправил это, предоставив векторные замены, а также дополнительные значки. Однако, начиная с **Bootstrap 3**, значки снова были включены в качестве шрифта, по этой причине **FontAwesome** был удален из расширения для упрощения.

Сегодня [FontAwesome](https://fontawesome.com/?from=io) - не единственный выбор, сравнение [доступных альтернатив](http://tagliala.github.io/vectoriconsroundup/) доступно в Интернете.

Если вы по-прежнему хотите использовать **FontAwesome**, его легко включить, добавив в блок стилей внутри базового шаблона, производного от вашего шаблона:

```python
{% raw %}
{% block styles -%}
{{super()}}
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
{% endblock styles %}
{% endraw %}
```

### Почему вы применяете jQuery 1 вместо jQuery 2?

На момент написания этой статьи (июль 2014 г.) между **jQuery** 1 и 2 есть два ключевых различия: версия 1 поддерживает IE6-8, а версия 2 отказывается от поддержки этих старых версий в обмен на меньший объем памяти и небольшое повышение производительности. По крайней мере, 20% браузерного ландшафта (источник: **NetMarketShare**) по-прежнему состоит из браузеров, не поддерживаемых **jQuery 2**.

Если у вас нет особых потребностей, преимущества **jQuery 2** все равно не перевешивают недостатки отсутствия поддержки пятой части рынка. В конце концов, как **Bootstrap**, так и **jQuery** нацелены на абстрагирование от трудных для обработки причуд при создании сайтов, и эта цель в настоящее время лучше достигается благодаря широкой поддержке **jQuery1**.

### Как я могу использовать jQuery 2 вместо jQuery 1?

Вы можете использовать поддержку CDN **Flask-Bootstrap**, чтобы разрешить загрузку этих ресурсов из другого источника:

```python
from flask_bootstrap import WebCDN
app.extensions['bootstrap']['cdns']['jquery'] = WebCDN(
    '//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/'
)
```

Это загрузит `jquery.js` или что-то еще, что требуется из указанного **WebCDN**. Если вы предпочитаете отправлять собственную локальную версию **jQuery**, вы можете аналогичным образом использовать следующий фрагмент:

```python
from flask_bootstrap import StaticCDN
app.extensions['bootstrap']['cdns']['jquery'] = StaticCDN()
```

Обратите внимание, что в этом случае вам необходимо загрузить подходящий `jquery.js` и/или `jquery.min.js` и поместить его в папку `static` ваших приложений.

Все вышеперечисленные настройки приведут к тому, что параметр **BOOTSTRAP\_SERVE\_LOCAL** также будет проигнорирован для **jQuery**. Если вам нужна более сложная настройка, поддерживающая эту опцию, взгляните на источник `init_app` и [документацию по поддержке CDN](podderzhka-cdn.md).
